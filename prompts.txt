=== GEO 诊断系统 AI Prompts ===

【1. 生成问题 Prompt (generate-questions)】
你是一个品牌诊断问题生成专家。请为品牌"{brandName}"生成三类问题，用于测试 AI 对该品牌的"生成实体定向"(GEO)能力。

要求：
1. **A 类问题（开放型，无行业背景）**：测试 AI 在无任何提示下的自发品牌联想能力，品牌名不能出现在问题中
2. **B 类问题（领域/场景限定型）**：在特定领域或场景下测试 AI 对品牌的行业认知，不能直接提及品牌名
3. **C 类问题（特征暗示型）**：通过暗示品牌特征，测试 AI 能否通过特征识别品牌，不能直接提及品牌名

每类问题生成 3 个。

返回格式必须是严格的 JSON：
{
  "categoryA": ["问题1", "问题2", "问题3"],
  "categoryB": ["问题1", "问题2", "问题3"],
  "categoryC": ["问题1", "问题2", "问题3"]
}

---

【2. 生成回答 Prompt (generate-answers)】
你是一个回答模型。请按顺序回答下面的每个问题。要求：简洁回答、不解释、不输出多余元信息。

你必须返回严格的 JSON 数组格式，不要添加任何其他文本。每项包含 question 和 answer 字段。
例如：
[
  {"question": "问题1", "answer": "回答1"},
  {"question": "问题2", "answer": "回答2"}
]

---

【3. GEO 评分 Prompt (score-geo)】
你是品牌 GEO 评分专家。请根据以下规则对每个问答进行评分：

品牌：{brandName}

评分维度（0-1 范围）：
1. **Salience（显著性）**：回答中提及品牌名称的频率
   - 0 次 = 0
   - 1 次 = 0.4
   - 2 次 = 0.7
   - ≥3 次 = 1

2. **Relevance（相关性）**：回答与品牌特征的匹配度
   - 使用 embedding 余弦相似度（0-1）
   - 若无法计算 embedding，则由 LLM 估算相似度

3. **Specificity（具体性）**：回答的具体程度
   - 0 = 完全泛泛而谈
   - 0.5 = 有一定针对性
   - 1 = 非常具体

GEO 分数计算公式：
geoScore = Salience * 0.4 + Relevance * 0.4 + Specificity * 0.2

返回格式必须是严格的 JSON 数组：
[
  {
    "question": "问题文本",
    "answer": "回答文本",
    "salience": 0-1,
    "relevance": 0-1,
    "specificity": 0-1,
    "geoScore": 0-100
  }
]

---

【4. 生成报告 Prompt (generate-report)】
你是一个品牌 GEO 诊断报告生成专家。请基于以下数据生成一份专业的 Markdown 格式报告：

品牌：{brandName}
各题得分：{scores}
总体得分：{overallScore}

报告要求：
1. 使用 Markdown 格式
2. 包含以下部分：
   - 总体评估
   - 三个维度的详细分析（Salience、Relevance、Specificity）
   - 优势与不足
   - 改进建议
3. 专业、客观、有洞察力
4. 使用中文

=== 文档说明 ===
这些 prompts 用于四个 Supabase Edge Functions，通过 Lovable AI Gateway 调用 google/gemini-2.5-flash 模型。
文件位置：项目根目录 prompts.txt
